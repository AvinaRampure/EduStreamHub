<%- include('../Includes/begin.ejs') %>
    <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/startbootstrap-sb-admin-2/4.1.3/css/sb-admin-2.css">
    <link rel="stylesheet" href="../CSS/admin-dashboard.css">
    <link rel="stylesheet" href="../CSS/admin-profile.css">

    <div class="container-fluid">

        <div id="wrapper">

            <%- include('../Includes/user_nav.ejs') %>

                <section id="content-wrapper">
                    <main role="main" class="pt-5 main">
                        <!-- Header -->
                        <section class="py-5">
                            <!-- Add this structure inside your "Latest Videos Section" -->
                            <h2 class="h3">Latest Videos</h2>
                            <div class="row video">
                                <div class="col-md-12">
                                    <div class="video-slideshow">
                                        <div class="video-slides carousel slide" data-ride="carousel"
                                            id="videoCarousel">
                                            <div class="carousel-inner">
                                                <% for (let i=0; i < videos.length; i++) { %>
                                                    <% if (i % 3===0) { %>
                                                        <div class="carousel-item <%= i === 0 ? 'active' : '' %>">
                                                            <div class="d-flex justify-content-between">
                                                                <!-- Add this div to display videos horizontally -->
                                                                <% } %>
                                                                    <div class="col-md-4 video">
                                                                        <div class="card mb-4"
                                                                            href="/user/watch?id=<%= videos[i].id %>"
                                                                            onclick="playVideo('<%=videos[i].id %>')">
                                                                            <img src="<%= videos[i].imageUrl %>"
                                                                                class="card-img-top" alt="Course image"
                                                                                height="250px">
                                                                            <div class="card-body">
                                                                                <h5 class="card-title">
                                                                                    <%= videos[i].name %>
                                                                                </h5>
                                                                                <p class="card-text">Author: <%=
                                                                                        videos[i].author %>
                                                                                </p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <% if ((i + 1) % 3===0 || i===videos.length - 1) {
                                                                        %>
                                                            </div> <!-- Close the d-flex div -->
                                                        </div>
                                                        <% } %>
                                                            <% } %>
                                            </div>
                                            <!-- Previous button in the video carousel -->
                                            <!-- Previous button in the video carousel -->
                                            <a id="prevButton" class="carousel-control-prev" href="#videoCarousel"
                                                role="button" data-slide="prev" onclick="videoMoveSlides(-1)">
                                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                <span class="sr-only">Previous</span>
                                            </a>


                                            <!-- Next button in the video carousel -->
                                            <a class="carousel-control-next" href="#videoCarousel" role="button"
                                                data-slide="next" onclick="videoMoveSlides(1)">
                                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                <span class="sr-only">Next</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <h2 class="h3">Latest Audios</h2>
                            <div class="row audio">
                                <div class="col-md-12">
                                    <div class="audio">
                                        <div class="audio-slides carousel slide" data-ride="carousel"
                                            id="audioCarousel">
                                            <div class="carousel-inner">
                                                <% for (let i=0; i < audios.length; i++) { %>
                                                    <% if (i % 3===0) { %>
                                                        <div class="carousel-item <%= i === 0 ? 'active' : '' %>">
                                                            <div class="d-flex justify-content-between">
                                                                <!-- Add this div to display videos horizontally -->
                                                                <% } %>
                                                                    <div class="col-md-4 audio"
                                                                    onclick="playAudio('<%= audios[i].id %>')">
                                                                        <div class="card mb-4">
                                                                            <img src="<%= audios[i].imageUrl %>"
                                                                                class="card-img-top" alt="Course image"
                                                                                height="250px">
                                                                            <div class="card-body">
                                                                                <h5 class="card-title">
                                                                                    <%= audios[i].name %>
                                                                                </h5>
                                                                                <p class="card-text">Author: <%=
                                                                                        audios[i].author %>
                                                                                </p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <% if ((i + 1) % 3===0 || i===audios.length - 1) {
                                                                        %>
                                                            </div> <!-- Close the d-flex div -->
                                                        </div>
                                                        <% } %>
                                                            <% } %>
                                            </div>
                                            <!-- Previous button in the video carousel -->
                                            <!-- Previous button in the video carousel -->
                                            <a id="prevButton" class="carousel-control-prev" href="#audioCarousel"
                                                role="button" data-slide="prev" onclick="audioMoveSlides(-1)">
                                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                <span class="sr-only">Previous</span>
                                            </a>


                                            <!-- Next button in the video carousel -->
                                            <a class="carousel-control-next" href="#audioCarousel" role="button"
                                                data-slide="next" onclick="audioMoveSlides(1)">
                                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                <span class="sr-only">Next</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <h2 class="h3">Latest Pdf</h2>
                            <div class="row document">
                                <div class="col-md-12">
                                    <div class="doc-slideshow">
                                        <div class="doc-slides carousel slide" data-ride="carousel"
                                            id="docCarousel">
                                            <div class="carousel-inner">
                                                <% for (let i=0; i < documents.length; i++) { %>
                                                    <% if (i % 3===0) { %>
                                                        <div class="carousel-item <%= i === 0 ? 'active' : '' %>">
                                                            <div class="d-flex justify-content-between">
                                                                <!-- Add this div to display videos horizontally -->
                                                                <% } %>
                                                                    <div class="col-md-4 doc">
                                                                        <div class="card mb-4"
                                                                            onclick="playDoc('<%= documents[i].docUrl %>')">
                                                                            <img src="<%= documents[i].imageUrl %>"
                                                                                class="card-img-top" alt="Course image"
                                                                                height="250px">
                                                                            <div class="card-body">
                                                                                <h5 class="card-title">
                                                                                    <%= documents[i].name %>
                                                                                </h5>
                                                                                <p class="card-text">Author: <%=
                                                                                    documents[i].author %>
                                                                                </p>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <% if ((i + 1) % 3===0 || i===documents.length - 1) {
                                                                        %>
                                                            </div> <!-- Close the d-flex div -->
                                                        </div>
                                                        <% } %>
                                                            <% } %>
                                            </div>
                                            <!-- Previous button in the video carousel -->
                                            <!-- Previous button in the video carousel -->
                                            <a id="prevButton" class="carousel-control-prev" href="#docCarousel"
                                                role="button" data-slide="prev" onclick="docMoveSlides(-1)">
                                                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                                <span class="sr-only">Previous</span>
                                            </a>


                                            <!-- Next button in the video carousel -->
                                            <a class="carousel-control-next" href="#docCarousel" role="button"
                                                data-slide="next" onclick="docMoveSlides(1)">
                                                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                                <span class="sr-only">Next</span>
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                        <%- include('../Includes/admin_end.ejs') %>
                    </main>
                    <script>
                        let videoSlideIndex = 0;
                        let audioSlideIndex = 0;
                        let docSlideIndex = 0;

                        function videoShowSlides() {
                            const slides = document.querySelectorAll('.video-slides'); // Correct class name

                            // Check if slides array is empty
                            if (slides.length === 0) {
                                console.error("No slides found.");
                                return;
                            }

                            // Ensure slideIndex is within bounds
                            videoSlideIndex = (videoSlideIndex < 0) ? (slides.length - 1) : (videoSlideIndex % slides.length);

                            // Hide all slides
                            for (let i = 0; i < slides.length; i++) {
                                slides[i].style.display = 'none';
                            }

                            // Display the current slide
                            slides[videoSlideIndex].style.display = 'flex';

                        }


                        function videoMoveSlides(n) {
                            videoSlideIndex += n;
                            videoShowSlides();
                        }

                        // Initially show the first set of slides
                        videoShowSlides();


                        function audioShowSlides() {
                            const slides = document.querySelectorAll('.audio-slides'); // Correct class name

                            // Check if slides array is empty
                            if (slides.length === 0) {
                                console.error("No slides found.");
                                return;
                            }

                            // Ensure slideIndex is within bounds
                            audioSlideIndex = (audioSlideIndex < 0) ? (slides.length - 1) : (audioSlideIndex % slides.length);

                            // Hide all slides
                            for (let i = 0; i < slides.length; i++) {
                                slides[i].style.display = 'none';
                            }

                            // Display the current slide
                            slides[audioSlideIndex].style.display = 'flex';

                        }

                        function audioMoveSlides(n) {
                            audioSlideIndex += n;
                            audioShowSlides();
                        }

                        // Initially show the first set of slides
                        audioShowSlides();

                        function docShowSlides() {
                            const slides = document.querySelectorAll('.doc-slides'); // Correct class name

                            // Check if slides array is empty
                            if (slides.length === 0) {
                                console.error("No slides found.");
                                return;
                            }

                            // Ensure slideIndex is within bounds
                            docSlideIndex = (docSlideIndex < 0) ? (slides.length - 1) : (docSlideIndex % slides.length);

                            // Hide all slides
                            for (let i = 0; i < slides.length; i++) {
                                slides[i].style.display = 'none';
                            }

                            // Display the current slide
                            slides[docSlideIndex].style.display = 'flex';

                        }


                        function docMoveSlides(n) {
                            docSlideIndex += n;
                            docShowSlides();
                        }

                        // Initially show the first set of slides
                        videoShowSlides();

                        function playVideo(id){
                            window.open(`/user/watch?id=${id}`,"_blank")
                        }

                        function playAudio(id){
                            window.open(`/user/listen?id=${id}`,"_blank")
                        }

                        function playDoc(url){
                            window.open(url,"_blank")
                        }
                    </script>